<!DOCTYPE html>
<html>
  <head>
    <script>
      if (location.protocol != "https:")
        location.href =
          "https:" +
          window.location.href.substring(window.location.protocol.length);
    </script>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width"
    />
    <title>VR YouTube Player</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <link
      rel="shortcut icon"
      href="https://cdn.glitch.com/4f89165b-bcad-4fd8-9ca4-f92e4ca028e4%2Ficon.svg?v=1589702054692"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@500&display=swap"
      rel="stylesheet"
    />

    <!-- LIBS -->
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script
      src="https://kit.fontawesome.com/45193cd0ce.js"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.slim.min.js"
      integrity="sha512-/DXTXr6nQodMUiq+IUJYCt2PPOUjrHJ9wFrqpJ3XkgPNOZVfMok7cRw6CSxyCQxXn6ozlESsSh1/sMCTF1rL/g=="
      crossorigin="anonymous"
    ></script>
    <script src="./js/aframe-keyboard.min.js"></script>
  </head>
  <body>
    <!---------------------->
    <!---------------------->

    <!-- FULLSCREEN CONTAINER -->

    <div id="container">
      <!-- AFRAME SCENE -->

      <a-scene keyboard-shortcuts="enterVR: false">
        <!-- ASSETS -->

        <a-assets>
          <img
            src="https://cdn.glitch.com/4f89165b-bcad-4fd8-9ca4-f92e4ca028e4%2Fwhite_grid_thin.png?v=1585644085396"
            id="grid"
            crossorigin="anonymous"
          />

          <img
            src="https://cdn.glitch.com/4f89165b-bcad-4fd8-9ca4-f92e4ca028e4%2Floading.png?v=1589751881220"
            id="loadingImg"
            crossorigin="anonymous"
          />

          <!-- DISPLAY VIDEO STREAM this will be rendered in the scene -->
          <video
            id="stream"
            crossorigin="anonymous"
            src="https://cdn.glitch.com/4f89165b-bcad-4fd8-9ca4-f92e4ca028e4%2Floading.mp4?v=1589651403926"
          ></video>
        </a-assets>

        <!---------------------->
        <!---------------------->

        <!-- CURSOR/CAMERA -->
        <a-camera universal-controls>
          <!--<a-entity
            id="cursor"
            cursor="fuse: true; fuseTimeout: 1000"
            position="0 0 -1"
            geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.025"
            material="color: #888; shader: flat; transparent: true; opacity: 0.3;"
            animation__click="property: scale; startEvents: click; easing: easeInCubic; dur: 150; from: 0.1 0.1 0.1; to: 1 1 1"
            animation__fusing="property: scale; startEvents: fusing; easing: easeInCubic; dur: 1000; from: 1 1 1; to: 0.1 0.1 0.1"
            animation__mouseleave="property: scale; startEvents: mouseleave; easing: easeInCubic; dur: 500; to: 1 1 1"
            raycaster="objects: .collidable"
          ></a-entity>-->
          <a-entity
            id="mouseCursor"
            raycaster="objects: .collidable"
            cursor="rayOrigin: mouse"
          ></a-entity>
        </a-camera>

        <!---------------------->

        <a-entity id="scene-content"></a-entity>

        <!---------------------->

        <a-entity id="keyboard-wrapper" visible="false">
          <a-entity
            id="keyboard"
            position="-0.2 1.6 -0.5"
            a-keyboard
            style="display: none"
          ></a-entity>
          <a-text
            id="input"
            font="dejavu"
            color="#000"
            value="Input value..."
            scale="0.5 0.5 0.5"
            position="-0.2 2 -1"
          ></a-text>
        </a-entity>

        <!---------------------->

        <!-- ENVIRONMENT -->
        <a-entity
          geometry="primitive: plane; width: 10000; height: 10000;"
          rotation="-90 0 0"
          material="src: #grid; repeat: 10000 10000; transparent: true; opacity:0.3;"
        ></a-entity>
        <!--<a-sky color="#dbdedb"></a-sky>-->
        <a-sky color="#333340"></a-sky>
        <a-entity light="color: #FFF; intensity: 1; type: ambient;"></a-entity>
      </a-scene>
      <!-- END AFRAME SCENE -->

      <!---------------------->
      <!---------------------->

      <!-- TEMPLATES -->
      <div style="display: none">
        <!---------------------->

        <template id="video-scene">
          <!-- VIDEO PLAYER -->
          <a-video
            src="#stream"
            width="2"
            height="1.125"
            position="0 1.6 -1.5"
          ></a-video>

          <!-- CONTROLS -->
          <a-image
            id="controlPlay"
            class="collidable"
            position="0 0.7 -1.5"
            scale="0.6 0.6"
          ></a-image>

          <a-image
            id="loading"
            position="0 1.6 -1.4"
            src="#loadingImg"
            scale="2 1.125"
          >
          </a-image>

          <!-- RECOMMENDATIONS -->
          <a-entity position="2 4.1 -1" id="watchList" rotation="0 -45 0">
            <!--<a-plane color="darkgrey" position="0 0 1"></a-plane>-->
          </a-entity>

          <a-image
            id="browseUp"
            class="collidable"
            position="1.25 1.9 -1.5"
            scale="0.5 0.5"
          ></a-image>
          <a-image
            id="browseDown"
            class="collidable"
            position="1.25 1.3 -1.5"
            scale="0.5 0.5"
          ></a-image>
        </template>

        <!---------------------->

        <template id="register-scene">
          <a-text
            font="dejavu"
            color="#000"
            value="Test"
            scale="0.5 0.5 0.5"
            position="-0.2 2 -1"
          ></a-text>
        </template>
      </div>

      <!---------------------->
      <!---------------------->

      <!-- START PROMPT -->
      <div id="start-prompt" style="display: block">
        <!-- upper logo -->
        <div id="start-prompt-logo">
          <img
            id="start-prompt-logo-img"
            src="https://cdn.glitch.com/4f89165b-bcad-4fd8-9ca4-f92e4ca028e4%2Ficon.svg?v=1589702054692"
          />
          <span id="start-prompt-logo-text">VR YouTube Player</span>
        </div>

        <!-- start prompt content -->
        <div
          id="start-prompt-content"
          class="start-prompt-section"
          style="display: block"
        >
          <!-- loading -->
          <div
            id="start-prompt-loading"
            class="start-prompt-center"
            style="display: block"
          >
            <div class="start-prompt-text">Loading...</div>
          </div>

          <!-- login -->
          <div
            id="start-prompt-login"
            class="start-prompt-center"
            style="display: none"
          >
            <div class="start-prompt-text center">
              Login to start
              <br /><br />
              <a href="/api/auth/google">Login with Google</a>
            </div>
          </div>

          <!-- landscape -->
          <div
            id="start-prompt-landscape"
            class="start-prompt-center"
            style="display: none"
          >
            <div class="start-prompt-icon-section">
              <div class="start-prompt-icon">
                <i class="fas fa-mobile-alt start-prompt-icon-inner"></i>
              </div>
              <div class="start-prompt-text">
                <div class="start-prompt-text-inner">
                  Please turn your device to landscape
                </div>
              </div>
            </div>
          </div>

          <!-- fullscreen -->
          <div
            id="start-prompt-fullscreen"
            class="start-prompt-center"
            style="display: none"
          >
            <div class="start-prompt-icon-section">
              <div class="start-prompt-icon">
                <i class="fas fa-expand start-prompt-icon-inner"></i>
              </div>
              <div class="start-prompt-text">
                <div class="start-prompt-text-inner">
                  Click to enter fullscreen
                </div>
              </div>
            </div>
          </div>

          <!-- enter -->
          <div
            id="start-prompt-enter"
            class="start-prompt-center"
            style="display: none"
          >
            <div class="start-prompt-text">
              Welcome<span id="prompt-user-name">, ...</span><br /><br />
              <a id="start-prompt-enter-button">Enter</a>
              <a onclick="localStorage.removeItem('userId');location.reload();"
                >Logout</a
              >
            </div>
          </div>
        </div>

        <div id="start-prompt-lower">
          <a href="/privacy.html">Privacy Policy</a>
        </div>
      </div>
      <!-- START PROMPT END -->
    </div>

    <script src="./js/main.js" defer></script>
    <script src="./js/login.js" defer></script>
    <script src="./js/vr.js" defer></script>
  </body>
</html>
